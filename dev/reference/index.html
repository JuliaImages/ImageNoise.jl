<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>References · ImageNoise</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../democards/cardtheme.css" rel="stylesheet" type="text/css"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">ImageNoise</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../democards/examples/">Examples</a></li><li class="is-active"><a class="tocitem" href>References</a><ul class="internal"><li><a class="tocitem" href="#ApplyNoise-1"><span>ApplyNoise</span></a></li><li><a class="tocitem" href="#ReduceNoise-1"><span>ReduceNoise</span></a></li><li><a class="tocitem" href="#NoiseAPI-1"><span>NoiseAPI</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>References</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>References</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/johnnychen94/ImageNoise.jl/blob/master/docs/src/reference.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="package_references-1"><a class="docs-heading-anchor" href="#package_references-1">Package References</a><a class="docs-heading-anchor-permalink" href="#package_references-1" title="Permalink"></a></h1><ul><li><a href="#package_references-1">Package References</a></li><ul><li><a href="#ApplyNoise-1">ApplyNoise</a></li><li><a href="#ReduceNoise-1">ReduceNoise</a></li><li><a href="#NoiseAPI-1">NoiseAPI</a></li></ul></ul><h2 id="ApplyNoise-1"><a class="docs-heading-anchor" href="#ApplyNoise-1">ApplyNoise</a><a class="docs-heading-anchor-permalink" href="#ApplyNoise-1" title="Permalink"></a></h2><p><code>ApplyNoise</code> module provides several noise prototypes.</p><article class="docstring"><header><a class="docstring-binding" id="ImageNoise.ApplyNoise.AdditiveWhiteGaussianNoise" href="#ImageNoise.ApplyNoise.AdditiveWhiteGaussianNoise"><code>ImageNoise.ApplyNoise.AdditiveWhiteGaussianNoise</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">AdditiveWhiteGaussianNoise &lt;: AbstractImageNoise
AdditiveWhiteGaussianNoise([μ=0.0], σ)</code></pre><p>apply white gaussian noise to image</p><p>For gray images, it uses the following formula:</p><pre><code class="language-none">out = clamp01.(in .+ σ .* randn(size(in)) .+ μ)</code></pre><p>RGB images are treated as 3D-gray images, generic Color3 images will be converted to RGB images first.</p><p><strong>Examples</strong></p><pre><code class="language-julia">img = testimage(&quot;lena_gray_256&quot;)
n = AdditiveWhiteGaussianNoise(0.1)
out = apply_noise(img, n)</code></pre><p>See also: <a href="#ImageNoise.NoiseAPI.apply_noise"><code>apply_noise</code></a>, <a href="#ImageNoise.NoiseAPI.apply_noise!"><code>apply_noise!</code></a></p><p><strong>References</strong></p><p>[1] Wikipedia contributors. (2019, March 8). Additive white Gaussian noise. In <em>Wikipedia, The Free Encyclopedia</em>. Retrieved 14:32, June 9, 2019, from https://en.wikipedia.org/w/index.php?title=Additive<em>white</em>Gaussian_noise&amp;oldid=886818982</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/johnnychen94/ImageNoise.jl/blob/50c0684ed15901f7858a0e9186da28a2f1070d7c/src/ApplyNoise/AdditiveWhiteGaussianNoise.jl#L1-L25">source</a></section></article><h2 id="ReduceNoise-1"><a class="docs-heading-anchor" href="#ReduceNoise-1">ReduceNoise</a><a class="docs-heading-anchor-permalink" href="#ReduceNoise-1" title="Permalink"></a></h2><p><code>ReduceNoise</code> module provides several noise reduction algorithms.</p><article class="docstring"><header><a class="docstring-binding" id="ImageNoise.ReduceNoise.NonlocalMean" href="#ImageNoise.ReduceNoise.NonlocalMean"><code>ImageNoise.ReduceNoise.NonlocalMean</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">NonlocalMean(λ [, r_p=2, r_s=2r_p+1])
NonlocalMean(λ, img)</code></pre><p>Non-local mean denoising filter for additive white Gaussian noise using the following formula:</p><div>\[    y[p] = \sum_{q \in \mathscr{N}(r\_s, p)} w[p, q]x[q]\]</div><p>where <code>w[p, q]</code> represents the similarity of two patches centered in <code>p</code> and <code>q</code>, calculated by</p><div>\[    w[p, q] = \frac{1}{Z[p]}e^{-\frac{\lVert\mathscr{N}(r\_w, p) - \mathscr{N}(r\_w, q) \rVert^2_{2, a}}{λ^2}}\]</div><p><code>Z[p]</code> is the normalizing constant so that <code>∑w</code> over <code>q</code> equals to <code>1</code>.</p><p><strong>Arguments</strong></p><ul><li><p><code>λ::Float64</code> is the degree of filtering, larger <code>λ</code> produces a smoother result.</p></li><li><p><code>r_p::Int64</code> is the radius of image patch size. By default it&#39;s 2.</p></li><li><p><code>r_s::Int64</code> is the radius of search window, large <code>r_s</code> would slow down</p></li></ul><p>the filtering significantly. By default it&#39;s <code>2r_p + 1</code>.</p><ul><li>If you pass <code>img</code> to <code>NonlocalMean</code>, it will be used to estimate <code>r_p</code> and <code>r_s</code>.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia">img = testimage(&quot;lena_color_256&quot;)

n = AdditiveWhiteGaussianNoise(0.1)
noisy_img = apply_noise(img, n)

# use default filter arguments
f_denoise = NonlocalMean(0.1)
denoised_img = reduce_noise(noisy_img, f)

# estimate filter arguments with noisy_img
f_denoise = NonlocalMean(0.1, noisy_img)
denoised_img = reduce_noise(noisy_img, f)</code></pre><p>See also: <a href="#ImageNoise.NoiseAPI.reduce_noise"><code>reduce_noise</code></a>, <a href="#ImageNoise.NoiseAPI.reduce_noise!"><code>reduce_noise!</code></a></p><p><strong>References</strong></p><p>[1] Buades, A., Coll, B., &amp; Morel, J. M. (2005, June). A non-local algorithm for image denoising. In <em>2005 IEEE Computer Society Conference on Computer Vision and Pattern Recognition (CVPR&#39;05)</em> (Vol. 2, pp. 60-65). IEEE.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/johnnychen94/ImageNoise.jl/blob/50c0684ed15901f7858a0e9186da28a2f1070d7c/src/ReduceNoise/NonlocalMean.jl#L1-L54">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ImageNoise.ReduceNoise._colon-Tuple{Any,Any}" href="#ImageNoise.ReduceNoise._colon-Tuple{Any,Any}"><code>ImageNoise.ReduceNoise._colon</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">_colon(I:J)</code></pre><p><code>_colon(I, J)</code> works equivelently to <code>I:J</code>, it&#39;s used to backward support julia v&quot;1.0&quot;.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/johnnychen94/ImageNoise.jl/blob/50c0684ed15901f7858a0e9186da28a2f1070d7c/src/ReduceNoise/compat.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ImageNoise.ReduceNoise.make_kernel-Tuple{Any}" href="#ImageNoise.ReduceNoise.make_kernel-Tuple{Any}"><code>ImageNoise.ReduceNoise.make_kernel</code></a> — <span class="docstring-category">Method</span></header><section><div><p>gaussian-like kernel </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/johnnychen94/ImageNoise.jl/blob/50c0684ed15901f7858a0e9186da28a2f1070d7c/src/ReduceNoise/NonlocalMean.jl#L132">source</a></section></article><h2 id="NoiseAPI-1"><a class="docs-heading-anchor" href="#NoiseAPI-1">NoiseAPI</a><a class="docs-heading-anchor-permalink" href="#NoiseAPI-1" title="Permalink"></a></h2><p>NoiseAPI is an <em>experimental</em> module on unifying the API of different denoise algorithms. This is used by algorithm develpers, users are not expected to use this module directly.</p><article class="docstring"><header><a class="docstring-binding" id="ImageNoise.NoiseAPI.AbstractImageAlgorithm" href="#ImageNoise.NoiseAPI.AbstractImageAlgorithm"><code>ImageNoise.NoiseAPI.AbstractImageAlgorithm</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">AbstractImageAlgorithm</code></pre><p>The root of image algorithms type system</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/johnnychen94/ImageNoise.jl/blob/50c0684ed15901f7858a0e9186da28a2f1070d7c/src/NoiseAPI/NoiseAPI.jl#L5-L9">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ImageNoise.NoiseAPI.AbstractImageFilter" href="#ImageNoise.NoiseAPI.AbstractImageFilter"><code>ImageNoise.NoiseAPI.AbstractImageFilter</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">AbstractImageFilter &lt;: AbstractImageAlgorithm</code></pre><p>Filters are image algorithms whose input and output are both images</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/johnnychen94/ImageNoise.jl/blob/50c0684ed15901f7858a0e9186da28a2f1070d7c/src/NoiseAPI/NoiseAPI.jl#L12-L16">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ImageNoise.NoiseAPI.apply_noise" href="#ImageNoise.NoiseAPI.apply_noise"><code>ImageNoise.NoiseAPI.apply_noise</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">apply_noise([::Type,] img, n::AbstractImageNoise, args...; rng=GLOBAL_RNG, kwargs...)</code></pre><p>Add/Apply noise <code>n</code> to image <code>img</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia">n = AdditiveWhiteGaussianNoise(0.1)
img = testimage(&quot;lena_gray_256&quot;)
apply_noise(img, n)

# sometimes we need to pass `rng` keyword argument to
# generate reproducible noise
apply_noise(img, n; rng = MersenneTwister(0))</code></pre><p>See also: <a href="#ImageNoise.NoiseAPI.apply_noise!"><code>apply_noise!</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/johnnychen94/ImageNoise.jl/blob/50c0684ed15901f7858a0e9186da28a2f1070d7c/src/NoiseAPI/ImageNoise.jl#L7-L25">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ImageNoise.NoiseAPI.apply_noise!" href="#ImageNoise.NoiseAPI.apply_noise!"><code>ImageNoise.NoiseAPI.apply_noise!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">apply_noise!([out,] img, n::AbstractImageNoise, args...; rng=GLOBAL_RNG, kwargs...)</code></pre><p>Add/Apply noise <code>n</code> to image <code>img</code>.</p><p>If <code>out</code> is specified, it will be changed in place. Otherwise <code>img</code> will be changed in place.</p><p><strong>Examples</strong></p><pre><code class="language-julia">n = AdditiveWhiteGaussianNoise(0.1)
img = testimage(&quot;lena_gray_256&quot;)
apply_noise!(img, n)

# sometimes we need to pass `rng` keyword argument to
# generate reproducible noise
apply_noise!(img, n; rng = MersenneTwister(0))</code></pre><p>See also: <a href="#ImageNoise.NoiseAPI.apply_noise"><code>apply_noise</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/johnnychen94/ImageNoise.jl/blob/50c0684ed15901f7858a0e9186da28a2f1070d7c/src/NoiseAPI/ImageNoise.jl#L28-L48">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ImageNoise.NoiseAPI.reduce_noise" href="#ImageNoise.NoiseAPI.reduce_noise"><code>ImageNoise.NoiseAPI.reduce_noise</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">reduce_noise([::Type,] img, f::AbstractImageDenoiseAlgorithm, args...)</code></pre><p>Remove noise of image <code>img</code> using algorithm <code>f</code>.</p><p>See also: <a href="#ImageNoise.NoiseAPI.reduce_noise!"><code>reduce_noise!</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/johnnychen94/ImageNoise.jl/blob/50c0684ed15901f7858a0e9186da28a2f1070d7c/src/NoiseAPI/ImageNoise.jl#L51-L57">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ImageNoise.NoiseAPI.reduce_noise!" href="#ImageNoise.NoiseAPI.reduce_noise!"><code>ImageNoise.NoiseAPI.reduce_noise!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">reduce_noise!([out,] img, f::AbstractImageDenoiseAlgorithm, args...)</code></pre><p>Remove noise of image <code>img</code> using algorithm <code>f</code>.</p><p>If <code>out</code> is specified, it will be changed in place. Otherwise <code>img</code> will be changed in place.</p><p>See also: <a href="#ImageNoise.NoiseAPI.reduce_noise"><code>reduce_noise</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/johnnychen94/ImageNoise.jl/blob/50c0684ed15901f7858a0e9186da28a2f1070d7c/src/NoiseAPI/ImageNoise.jl#L60-L68">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ImageNoise.NoiseAPI.@filter_api" href="#ImageNoise.NoiseAPI.@filter_api"><code>ImageNoise.NoiseAPI.@filter_api</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia">@filter_api api_name [filter_type=AbstractImageFilter]</code></pre><p>This macro it generate two methods:</p><ul><li><code>api_name([::Type,] img, f::filter_type, args...; kwargs...)</code></li><li><code>api_name!([out,] img, f::filter_type, args...; kwargs...)</code></li></ul><p>For in-place method <code>api_name!</code>, <code>out</code> will be changed after calling the method. When <code>out</code> is not explicitly passed, <code>img</code> will be changed after calling the method.</p><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><ul><li>Any api implementation needs to support a <code>f(out, in, args...)</code> method.</li><li>This macro is designed to be used in ImagesAPIs, and not downstream packages</li></ul></div></div><p><strong>Example:</strong></p><p><strong>1. register the api in ImagesAPI.jl</strong></p><pre><code class="language-julia">abstract type AbstractImageNoise &lt;: AbstractImageFilter end
@filter_api apply_noise AbstractImageNoise</code></pre><p><strong>2. implement the api in ImageNoise.jl</strong></p><pre><code class="language-julia">import Main.ImagesAPI: AbstractImageNoise, AbstractImageFilter, apply_noise, apply_noise!

export
    apply_noise, apply_noise!,
    AbstractImageNoise,
    AdditiveWhiteGaussianNoise

struct AdditiveWhiteGaussianNoise{T&lt;:AbstractFloat} &lt;: AbstractImageNoise
    mean::T
    std::T
end

function (noise::AdditiveWhiteGaussianNoise)(out, in::AbstractArray)
    @. out = in + noise.std * randn(eltype(out), size(in)) + noise.mean
end</code></pre><p><strong>3. user call the API in a consistent way</strong></p><pre><code class="language-julia">using ImageNoise
noise = AdditiveWhiteGaussianNoise(0.0, 0.1)

# simple usage
apply_noise(ones(3,3), noise)

# inplace changing
img = ones(3,3)
apply_noise!(img, noise)

# preallocation output
img = ones(3,3)
out = zeros(3, 3)
apply_noise!(out, img, noise)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/johnnychen94/ImageNoise.jl/blob/50c0684ed15901f7858a0e9186da28a2f1070d7c/src/NoiseAPI/utils.jl#L1-L62">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../democards/examples/">« Examples</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Tuesday 31 December 2019 06:06">Tuesday 31 December 2019</span>. Using Julia version 1.0.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
